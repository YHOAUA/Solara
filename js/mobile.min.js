!function(){if(!window.__SOLARA_IS_MOBILE)return;const e=window.SolaraMobileBridge||{};e.handlers=e.handlers||{},e.queue=Array.isArray(e.queue)?e.queue:[],window.SolaraMobileBridge=e;const t=window.SolaraDom||{};let o=!1;function n(){t.mobileToolbarTitle&&(t.mobileToolbarTitle.textContent="Solara")}function i(){if(!t.mobileOverlayScrim||!document.body)return;const e=document.body.classList.contains("mobile-search-open")||document.body.classList.contains("mobile-panel-open");t.mobileOverlayScrim.setAttribute("aria-hidden",e?"false":"true")}function a(){document.body&&(document.body.classList.add("mobile-search-open"),document.body.classList.remove("mobile-panel-open"),t.searchArea&&t.searchArea.setAttribute("aria-hidden","false"),i(),t.searchInput&&window.requestAnimationFrame(()=>{try{t.searchInput.focus({preventScroll:!0})}catch(e){t.searchInput.focus()}}))}function l(){document.body&&(document.body.classList.remove("mobile-search-open"),t.searchArea&&t.searchArea.setAttribute("aria-hidden","true"),t.searchInput&&t.searchInput.blur(),i())}function s(){document.body&&(document.body.classList.contains("mobile-search-open")?l():a())}function r(e){return"lyrics"===e?"playlist":e||"playlist"}function c(e="playlist"){if(!document.body)return;const o=r(e);"function"==typeof window.switchMobileView&&window.switchMobileView(o),document.body.classList.add("mobile-panel-open"),document.body.classList.remove("mobile-search-open"),t.searchArea&&t.searchArea.setAttribute("aria-hidden","true"),document.body.setAttribute("data-mobile-panel-view",o),i()}function d(){document.body&&(document.body.classList.remove("mobile-panel-open"),i())}function u(){l(),d()}if(e.handlers.updateToolbarTitle=n,e.handlers.openSearch=a,e.handlers.closeSearch=l,e.handlers.toggleSearch=s,e.handlers.openPanel=c,e.handlers.closePanel=d,e.handlers.togglePanel=function(e="playlist"){if(!document.body)return;const t=document.body.classList.contains("mobile-panel-open"),o=document.body.getAttribute("data-mobile-panel-view")||"playlist",n=r(e);!t||n&&o!==n?c(n||o||"playlist"):d()},e.handlers.closeAllOverlays=u,e.handlers.initialize=function(){if(o||!document.body)return;o=!0,document.body.classList.add("mobile-view"),document.body.setAttribute("data-mobile-panel-view","playlist"),t.mobilePanelTitle&&(t.mobilePanelTitle.textContent="播放列表"),t.lyrics&&t.lyrics.classList.remove("active"),t.playlist&&t.playlist.classList.add("active"),n(),t.mobileSearchToggle&&t.mobileSearchToggle.addEventListener("click",s),t.mobileSearchClose&&t.mobileSearchClose.addEventListener("click",l),t.mobilePanelClose&&t.mobilePanelClose.addEventListener("click",d),t.mobileQueueToggle&&t.mobileQueueToggle.addEventListener("click",()=>c("playlist")),document.addEventListener("pointerdown",e=>{if(!document.body)return;if(!(document.body.classList.contains("mobile-search-open")||document.body.classList.contains("mobile-panel-open")))return;const o=e.target;t.mobilePanel&&(t.mobilePanel===o||t.mobilePanel.contains(o))||t.searchArea&&(t.searchArea===o||t.searchArea.contains(o))||t.playerQualityMenu&&t.playerQualityMenu.contains(o)||o&&"function"==typeof o.closest&&o.closest(".quality-menu")||u()},!0),t.searchArea&&t.searchArea.setAttribute("aria-hidden","true"),t.mobileOverlayScrim&&t.mobileOverlayScrim.setAttribute("aria-hidden","true"),i()},e.queue.length){const t=e.queue.splice(0,e.queue.length);for(const o of t){const t=e.handlers[o.name];"function"==typeof t&&t(...o.args||[])}}}();